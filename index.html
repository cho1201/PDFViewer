<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Drive PDF 뷰어</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 font-sans antialiased text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-700">Google Drive PDF 뷰어</h1>
            <p class="text-gray-500 mt-2">Google Drive에 있는 PDF 파일을 선택하고 슬라이드하며 보세요.</p>
        </header>

        <!-- API 키 및 클라이언트 ID 설정 섹션 -->
        <div id="config-section" class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg mb-6 max-w-4xl mx-auto">
            <h2 class="font-bold text-lg mb-2">중요: 설정 안내</h2>
            <p>이 애플리케이션을 사용하려면 Google Cloud Console에서 API 키와 OAuth 2.0 클라이언트 ID를 발급받아 아래 필드에 입력해야 합니다. 자세한 내용은 README.md 파일을 참고하세요.</p>
            <div class="mt-4">
                <input type="text" id="api-key" placeholder="여기에 API Key를 입력하세요" class="w-full p-2 border rounded shadow-sm text-gray-700">
                <input type="text" id="client-id" placeholder="여기에 Client ID를 입력하세요" class="w-full p-2 border rounded shadow-sm mt-2 text-gray-700">
                <button id="save-config" class="mt-3 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                    설정 저장
                </button>
            </div>
        </div>

        <!-- 인증 및 파일 목록 섹션 -->
        <div id="main-content" class="hidden">
            <div class="text-center mb-6">
                <button id="authorize_button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 hidden">Google Drive 인증</button>
                <button id="signout_button" class="hidden bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300">로그아웃</button>
            </div>

            <div id="file-list-container" class="hidden bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto">
                <h2 class="text-2xl font-semibold mb-4 border-b pb-2">PDF 파일 목록</h2>
                <div id="file-list" class="max-h-96 overflow-y-auto">
                    <!-- 파일 목록이 여기에 동적으로 추가됩니다 -->
                </div>
                 <div id="loading-files" class="text-center p-4 hidden">
                    <p class="text-gray-500">파일을 불러오는 중...</p>
                </div>
            </div>
        </div>

        <!-- PDF 뷰어 섹션 -->
        <div id="viewer-container" class="hidden mt-8">
             <div class="text-center mb-4">
                <button id="back-to-list" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                    &larr; 파일 목록으로 돌아가기
                </button>
            </div>
            <div class="bg-white p-4 md:p-8 rounded-lg shadow-xl max-w-4xl mx-auto">
                <h3 id="pdf-title" class="text-2xl font-bold text-center mb-4 truncate"></h3>
                <div id="pdf-viewer" class="flex justify-center items-center mb-4">
                    <!-- PDF 페이지가 캔버스에 렌더링됩니다 -->
                </div>
                <div id="navigation-controls" class="flex items-center justify-center space-x-4">
                    <button id="prev-page" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-full transition duration-300 shadow-lg">&lt; 이전</button>
                    <div>
                        <span id="page-num" class="text-lg font-semibold"></span> / <span id="page-count" class="text-lg font-semibold"></span>
                    </div>
                    <button id="next-page" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-full transition duration-300 shadow-lg">다음 &gt;</button>
                </div>
                 <div id="loading-pdf" class="text-center p-4 hidden">
                    <p class="text-gray-500">PDF 파일을 불러오는 중...</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                        <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 외부 라이브러리 (안정적인 최신 CDN으로 변경) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    
    <!-- Custom Script (라이브러리 로드 후 실행) -->
    <script src="script.js"></script>
</body>
</html>

